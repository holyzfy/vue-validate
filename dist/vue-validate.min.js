// https://github.com/holyzfy/vue-validate v0.4.5 Copyright 2018 holyzfy <zhaofuyun202@gmail.com>
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validate=t()}(this,function(){"use strict";var e={};function t(t,i){t.checkValidity(),t.validity.valid?(this.$delete(this.errors,t.name),function(t,r,i){var n=function(e){var t={},a=e.dataset;for(var r in a)if("rule"===r.slice(0,4)){var i=r.slice(4).toLowerCase();t[i]=a[r]}return t}(r);for(var s in n){var o=n[s],d=e[s](r.value,r,o,i);if(!d){var l="message"+s[0].toUpperCase()+s.slice(1),c=r.dataset[l]||"";c||console.warn(`请指定自定义消息的属性 data-message-${s}`,r);var v=a(c,o);t.$set(t.errors,r.name,{state:"customError",message:v})}}}(this,t,i)):this.$set(this.errors,t.name,{state:r(t.validity),message:t.validationMessage})}function a(e,t){return"string"==typeof t&&t.split(",").forEach(function(t,a){var r=new RegExp("\\{"+a+"\\}","g");e=e.replace(r,t)}),e}function r(e){for(var t in e)if(e[t])return t}return function(a){var i;return Object.assign(e,a),{data:()=>({errors:{}}),methods:{valid(){var e=this;return[].slice.call(e.$el.querySelectorAll("input, textarea, select")).forEach(a=>t.bind(e,a,i)),0===Object.keys(e.errors).length}},directives:{validate:{inserted(e,a,n){var s=n.context;i=a.value,e.addEventListener("input",e=>{e.target.dataset.lazy||t.bind(s)(e.target,i)}),e.addEventListener("change",e=>{var a=e.target;(["checkbox","radio"].indexOf(a.type)>=0||a.dataset.lazy)&&t.bind(s)(e.target,i)}),e.addEventListener("invalid",e=>{e.preventDefault();var t=e.target;s.$set(s.errors,t.name,{state:r(t.validity),message:t.validationMessage})},!0)}}}}}});
