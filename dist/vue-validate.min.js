// https://github.com/holyzfy/vue-validate v0.4.4 Copyright 2018 holyzfy <zhaofuyun202@gmail.com>
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.validate=t()}(this,function(){"use strict";var e={};function t(t){t.checkValidity(),t.validity.valid?(this.$delete(this.errors,t.name),function(t,r){var i=function(e){var t={},a=e.dataset;for(var r in a)if("rule"===r.slice(0,4)){var i=r.slice(4).toLowerCase();t[i]=a[r]}return t}(r);for(var n in i){var s=i[n],o=e[n](r.value,r,s);if(!o){var d="message"+n[0].toUpperCase()+n.slice(1),l=r.dataset[d]||"";l||console.warn(`请指定自定义消息的属性 data-message-${n}`,r);var c=a(l,s);t.$set(t.errors,r.name,{state:"customError",message:c})}}}(this,t)):this.$set(this.errors,t.name,{state:r(t.validity),message:t.validationMessage})}function a(e,t){return"string"==typeof t&&t.split(",").forEach(function(t,a){var r=new RegExp("\\{"+a+"\\}","g");e=e.replace(r,t)}),e}function r(e){for(var t in e)if(e[t])return t}return function(a){return Object.assign(e,a),{data:()=>({errors:{}}),methods:{valid(){return[].slice.call(this.$el.querySelectorAll("input, textarea, select")).forEach(t.bind(this)),0===Object.keys(this.errors).length}},directives:{validate:{inserted(e,a,i){var n=i.context;e.addEventListener("input",e=>{e.target.dataset.lazy||t.bind(n)(e.target)}),e.addEventListener("change",e=>{var a=e.target;(["checkbox","radio"].indexOf(a.type)>=0||a.dataset.lazy)&&t.bind(n)(e.target)}),e.addEventListener("invalid",e=>{e.preventDefault();var t=e.target;n.$set(n.errors,t.name,{state:r(t.validity),message:t.validationMessage})},!0)}}}}}});
